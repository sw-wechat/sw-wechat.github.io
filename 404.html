<!DOCTYPE html>
<html lang=en>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=3.0, minimum-scale=1.0"/>
<title>守望微信网站</title>
<link id=favicon rel=icon href type=image/gif sizes=16x16>
<style>#wechat_iframe{position:absolute;left:-2px;top:-2px;right:-2px;bottom:-2px}#loading{position:absolute;top:20px;left:20px;right:20px;background:#fff;opacity:.9;transition:all 2s}#loading p.default{margin-bottom:0}#loading .loading-longer{color:#ff6708}#loading .loading-connected{color:#0061b9}#wechat_img,#wechat_summary{height:1px;width:1px;overflow:hidden;opacity:.1;position:fixed;bottom:0;left:0}.hide{display:none}.website-host{font-weight:bold;font-style:italic}.link{color:#0061b9}.website-title-extra{font-size:14px}#featured{overflow:hidden;display:inline-block}</style>
</head>
<body>
<div id=wechat_img><img id=featured width=1 height=1 src="/logo.png"/></div>
<div id=wechat_summary>守望的微信网站跳转中……</div>
<iframe id=wechat_iframe height=100% width=100% src>
</iframe>
<h1 id=loading>
<p class=default>正在载入网站 <span class="website-host link"></span> ... </p>
<p class="loading-connected hide">网站已经连接成功，正在加载完整数据....</p>
<p class="loading-longer hide">不好意思，好像加载时间略长一些，请再耐心等等。</p>
<p class="loading-failure hide">
如果不想等，请点击微信右上角，选择"在浏览器(Safari/QQ)打开"；或者直接在你的手机浏览器里输入 <span class=website-host></span>：
</p>
<p class="unload hide">正在打开新网页……<span class="website-title link"></span><br/><br/>(<span class=website-title-extra></span>)</p>
</h1>
<script>(function(){var g=document;var G=window;var r;var l=location;var y=!!l.hostname.match("localhost")||!!l.hostname.match("127.0.0.1");var F;var C=false;var f=0;var N=g.querySelector("#loading");var t=g.querySelector("#loading .default");var v=g.querySelector("#loading .loading-connected");var h=g.querySelector("#loading .loading-longer");var n=g.querySelector("#loading .loading-failure");var a=g.querySelector("#loading .unload");var B=g.querySelector(".website-title");var m=g.querySelector(".website-title-extra");var j=g.querySelector("#wechat_iframe");var o=g.getElementById("favicon");var s=g.getElementById("featured");var d=setInterval(u,500);var D="/--WC--";var J=new RegExp(D,"g");var k="loadingIFrame";var e=new Event(k);var z=y?"http://":"https://";var x=l.pathname.replace(/\//,"").split("/")[0];o.href="/"+x+"/favicon.ico";H();p();i();G.addEventListener("message",function(W){var V=W.data;switch(V.msgTitle){case"connected":f=f||new Date().valueOf();if(C){return}C=true;clearTimeout(F);O(t,h,n,a);E(v);setTimeout(function(){O(v);Q(N)},500);break;case"updateParent":clearInterval(d);var Y=V.title;var U=V.description;var R=V.faviconUrl;var X=r=V.url;if(!X){return}if(V.isReplaceHref){l.href=X.replace(/^\/\//g,"http://")}else{g.title=Y;var T=X.replace(z,"").replace("#",D);w(T);if(V.imgSrc){s.src=V.imgSrc}var S=g.getElementById("wechat_summary");if(U&&S){S.innerText=U}if(R){o.setAttribute("href",R)}}break;break}});g.addEventListener(k,function(R){K()},false);g.addEventListener("DOMContentLoaded",function(){g.dispatchEvent(e);q()});function p(){var R;try{R=decodeURI(l.hash.replace(/^#/,"").replace(z,""))}catch(S){}R=R||"";if(R.length>3){w(R)}}function P(R){return z+R.replace(J,"#")}function w(S){S=S||"/"+x+"/";var T=j.contentWindow;if(!T){return}var R=S;I(R);setTimeout(function(){var V=localStorage.getItem("lastIFrameUrl");var U=localStorage.getItem("lastIFrameUrlDateTime");var W=new Date().valueOf();localStorage.setItem("lastIFrameUrlDateTime",W);localStorage.setItem("lastIFrameUrl",R);if(V!==R&&R&&R.length>10){if(f&&W>f+7000&&U&&(+U)+3000<W){}}},10)}function I(R){R=R||"";if(!/^\//.test(R)){R="/"+R}if(location.pathname!==R){location.pathname=R}}function K(){var R=b();if(j.src!=R){j.src=R}[].forEach.call(g.querySelectorAll(".website-host"),function(S){S.innerText=M(R)})}function b(){var S,V;V=l.pathname.replace(/^\//,"");S=V;var U=z;var T=U+x;if(S&&S.length>5){var R=P(S);if(j.src!=R&&r!==R){T=R}}return T}function c(){var R=b();R=R.replace(/\/$/,"");var S=R.split("/").pop();S=S&&decodeURIComponent(S)||g.title;return S}function H(){g.title=c()}function q(){F=setTimeout(function(){t.style.display="none";h.style.display="block";F=setTimeout(function(){h.style.display="none";n.style.display="block";F=setTimeout(function(){n.style.display="none"},5000)},8000)},7000)}function u(){var R=j.contentWindow;if(!R){return}R.postMessage({type:"wechat_unblocker"},"*")}function O(){[].forEach.call(arguments,function(R){R.style.display="none"})}function E(R){[].forEach.call(arguments,function(S){S.style.display="block"})}function Q(R){R.style.transform="translate(0px, -100px)";R.style.opacity=0.5;setTimeout(function(){O(R)},1000)}function L(R){E(R);R.style.transform="translate(0px, 0px)";R.style.opacity=1}function M(R){R=R||"";var S=R.split("/").reverse().reduce(function(T,U){U=decodeURIComponent(U);if(U&&U.length>5&&U.length>T.length){return U}else{return T}},"");return S&&/[\u4E00-\u9FA5]+/.test(S)?S:R}function i(){if(!A()){location.replace(b())}}function A(){var R=navigator.userAgent.toLowerCase();return !!R.match(/MicroMessenger/i)}})();</script>
</body>
</html>